language: java
jdk:
- oraclejdk8
install: true
script:
- gradle zipMap
before_deploy:
- git config --global user.email "tripleabuilderbot@gmail.com"
- git config --global user.name "tripleabuilderbot"
- export MAP_TAGGED_VERSION="$MAP_VERSION.$TRAVIS_BUILD_NUMBER"
- git tag $MAP_TAGGED_VERSION -a -m "$MAP_TAGGED_VERSION"
- git push -q https://$GITHUB_PERSONAL_ACCESS_TOKEN_FOR_TRAVIS@github.com/triplea-maps/$REPO_NAME --tags
deploy:
  provider: releases
  api_key:
    secure: k3EkweyGOEO+CDGTw+RcZVBQd9tl6TMlt+l16RUFbTKh2zUCceTfBNZMDky8QZ8uVU/iR2R8u7qAIbKPj2jdEkA1xPPlVbNWcNlhePjmex7nLXYVBSwwGhPrP1KbzTSp0uLyyFRlUrDbWoMv21BfG5FelYDGWZNaa7ZzltfJcV1JbIAT/BqkHd9PkZb6xwKtUHNBlWBv+7pF3GRozlbbCueLXO9UDNuJo96vMYVnzImEfsQlgtxkvNVXBa+x8mTQhBSWOZIBnlSDLTRLGIZi0R6rrV2TgHZHq+zTmj7fVhnAm+xpe/0qya6sVsQ3d3B05CFAaZuB3rPY91uw2DJcqwpUOjvgYriVWWhugcIBfk1webExmZO9qRBD3C/OHqnXDbTPF7daHj8dEXmG5p4MnhUTfVaF3m/+QDFg4CsT3BgtpOqzHPpN67dQD9XrwvshoCd7B4iuaAH5a78SbYFdVgC6/iZmtwUjOUKRXVBT5OtjnCyrSvatJQBleiDYql3dyG9QkdkBXmvZ1yugrjn8V+T5Es8YNdVwjMUSNjHspR2+eIkivt0ZlZm/v2aw3xoeuXFv3uBzkt9bdR6VDOXx2CHlo2zD/sJKWGrOwuvhUCMMXPizEUKBUTqk1fQcLpE4fAqqY/pG1lFnyDz0WEr4S/GSkbjxdVcz2xvF8xTL6xs=
  file: "$REPO_NAME.zip"
  skip_cleanup: true
  prerelease: true
  on:
    tags: false
    all_branches: true
